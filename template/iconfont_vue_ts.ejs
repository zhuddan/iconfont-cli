<script setup lang="ts">
import type { CSSProperties, PropType } from 'vue'
import type { IconfontTypes } from './iconfont-types'

import data from './iconfont-data'

const props = defineProps({
  size: {
    type: Number,
  },
  color: {
    type: String,
    default: '#000000',
  },
  name: {
    type: String as PropType<IconfontTypes>,
    required: true,
  },
})

const mask = computed(() => {
  return `url("data:image/svg+xml;charset=utf-8,${encodeURIComponent(data[props.name])}") no-repeat`
})

const innerStyle = computed(() => {
  const _size = props.size ? `${props.size}px` : '1em'
  return {
    'mask': mask.value,
    '-webkit-mask': mask.value,
    'mask-size': _size,
    '-webkit-mask-size': _size,
    'mask-repeat': 'no-repeat',
    '-webkit-mask-repeat': 'no-repeat',
    'width': _size,
    'height': _size,
    'backgroundColor': props.color,
  } satisfies CSSProperties
})
</script>

<template>
  <div class="iconfont" :style="innerStyle" />
</template>

<style>
.iconfont {
  display: inline-block;
  mask-repeat: no-repeat;
}
</style>
